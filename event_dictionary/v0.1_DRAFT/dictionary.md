# Event

- [1. [Required] Property `Event > header`](#header)
  - [1.1. [Required] Property `Event > header > version`](#header_version)
  - [1.2. [Required] Property `Event > header > topic`](#header_topic)
  - [1.3. [Required] Property `Event > header > type`](#header_type)
    - [1.3.1. Event > header > type > items](#autogenerated_heading_2)
  - [1.4. [Required] Property `Event > header > source`](#header_source)
  - [1.5. [Required] Property `Event > header > channel`](#header_channel)
  - [1.6. [Required] Property `Event > header > dateTime`](#header_dateTime)
  - [1.7. [Required] Property `Event > header > messageId`](#header_messageId)
  - [1.8. [Required] Property `Event > header > correlationId`](#header_correlationId)
  - [1.9. [Optional] Property `Event > header > originatingUser`](#header_originatingUser)
- [2. [Required] Property `Event > payload`](#payload)
  - [2.1. Property `Event > payload > oneOf > refusal.schema.json`](#payload_oneOf_i0)
    - [2.1.1. Property `Event > payload > oneOf > Refusal > refusal`](#payload_oneOf_i0_refusal)
      - [2.1.1.1. Property `Event > payload > oneOf > Refusal > refusal > caseId`](#payload_oneOf_i0_refusal_caseId)
      - [2.1.1.2. Property `Event > payload > oneOf > Refusal > refusal > type`](#payload_oneOf_i0_refusal_type)
        - [2.1.1.2.1. Event > payload > oneOf > Refusal > refusal > type > items](#autogenerated_heading_3)
  - [2.2. Property `Event > payload > oneOf > surveyLaunch.schema.json`](#payload_oneOf_i1)
    - [2.2.1. Property `Event > payload > oneOf > Survey Launch > surveyLaunch`](#payload_oneOf_i1_surveyLaunch)
      - [2.2.1.1. Property `Event > payload > oneOf > Survey Launch > surveyLaunch > qid`](#payload_oneOf_i1_surveyLaunch_qid)
  - [2.3. Property `Event > payload > oneOf > uacAuthentication.schema.json`](#payload_oneOf_i2)
    - [2.3.1. Property `Event > payload > oneOf > UAC Authentication > uacAuthentication`](#payload_oneOf_i2_uacAuthentication)
      - [2.3.1.1. Property `Event > payload > oneOf > UAC Authentication > uacAuthentication > qid`](#payload_oneOf_i2_uacAuthentication_qid)

**Title:** Event

| Type                      | `object`                                                |
| ------------------------- | ------------------------------------------------------- |
| **Additional properties** | [[Not allowed]](# "Additional Properties not allowed.") |
|                           |                                                         |

| Property               | Pattern | Type   | Deprecated | Definition                 | Title/Description |
| ---------------------- | ------- | ------ | ---------- | -------------------------- | ----------------- |
| + [header](#header )   | No      | object | No         | In eventHeader.schema.json | -                 |
| + [payload](#payload ) | No      | object | No         | In #/definitions/payload   | -                 |
|                        |         |        |            |                            |                   |

## <a name="header"></a>1. [Required] Property `Event > header`

| Type                      | `object`                                                                  |
| ------------------------- | ------------------------------------------------------------------------- |
| **Additional properties** | [[Any type: allowed]](# "Additional Properties of any type are allowed.") |
| **Defined in**            | eventHeader.schema.json                                                   |
|                           |                                                                           |

| Property                                      | Pattern | Type                      | Deprecated | Definition | Title/Description                                                         |
| --------------------------------------------- | ------- | ------------------------- | ---------- | ---------- | ------------------------------------------------------------------------- |
| + [version](#header_version )                 | No      | string                    | No         | -          | The version of the schema that this message conforms to.                  |
| + [topic](#header_topic )                     | No      | string                    | No         | -          | The Google Pub/Sub topic that this event was published to.                |
| + [type](#header_type )                       | No      | array of enum (of string) | No         | -          | The type of event.                                                        |
| + [source](#header_source )                   | No      | string                    | No         | -          | The microservice which published this event.                              |
| + [channel](#header_channel )                 | No      | string                    | No         | -          | The product which published this event.                                   |
| + [dateTime](#header_dateTime )               | No      | date-time                 | No         | -          | When the event happened (this might not be when it was published).        |
| + [messageId](#header_messageId )             | No      | uuid                      | No         | -          | A unique identifier for this message.                                     |
| + [correlationId](#header_correlationId )     | No      | uuid                      | No         | -          | A unique identifier for everything that relates to this event end-to-end. |
| - [originatingUser](#header_originatingUser ) | No      | string                    | No         | -          | The user that initiated this event, for audit trail.                      |
|                                               |         |                           |            |            |                                                                           |

### <a name="header_version"></a>1.1. [Required] Property `Event > header > version`

| Type                      | `string`                                                                  |
| ------------------------- | ------------------------------------------------------------------------- |
| **Additional properties** | [[Any type: allowed]](# "Additional Properties of any type are allowed.") |
|                           |                                                                           |

**Description:** The version of the schema that this message conforms to.

**Example:** 

```json
"v1.0"
```

### <a name="header_topic"></a>1.2. [Required] Property `Event > header > topic`

| Type                      | `string`                                                                  |
| ------------------------- | ------------------------------------------------------------------------- |
| **Additional properties** | [[Any type: allowed]](# "Additional Properties of any type are allowed.") |
|                           |                                                                           |

**Description:** The Google Pub/Sub topic that this event was published to.

**Examples:** 

```json
"event_survey-launched"
```

```json
"event_refusal"
```

### <a name="header_type"></a>1.3. [Required] Property `Event > header > type`

| Type                      | `array of enum (of string)`                                               |
| ------------------------- | ------------------------------------------------------------------------- |
| **Additional properties** | [[Any type: allowed]](# "Additional Properties of any type are allowed.") |
|                           |                                                                           |

**Description:** The type of event.

|                      | Array restrictions |
| -------------------- | ------------------ |
| **Min items**        | N/A                |
| **Max items**        | N/A                |
| **Items unicity**    | False              |
| **Additional items** | False              |
| **Tuple validation** | See below          |
|                      |                    |

| Each item of this array must be | Description |
| ------------------------------- | ----------- |
| [items](#header_type_items)     | -           |
|                                 |             |

#### <a name="autogenerated_heading_2"></a>1.3.1. Event > header > type > items

| Type                      | `enum (of string)`                                                        |
| ------------------------- | ------------------------------------------------------------------------- |
| **Additional properties** | [[Any type: allowed]](# "Additional Properties of any type are allowed.") |
|                           |                                                                           |

Must be one of:
* "CASE_CREATED"
* "CASE_UPDATED"
* "UAC_UPDATED"
* "RESPONSE_RECEIVED"
* "REFUSAL_RECEIVED"
* "ADDRESS_NOT_VALID"
* "SURVEY_LAUNCHED"
* "RESPONDENT_AUTHENTICATED"
* "FULFILMENT"
* "DEACTIVATE_UAC"
* "UPDATE_SAMPLE_SENSITIVE"

### <a name="header_source"></a>1.4. [Required] Property `Event > header > source`

| Type                      | `string`                                                                  |
| ------------------------- | ------------------------------------------------------------------------- |
| **Additional properties** | [[Any type: allowed]](# "Additional Properties of any type are allowed.") |
|                           |                                                                           |

**Description:** The microservice which published this event.

**Examples:** 

```json
"Case Processor"
```

```json
"EQ Runner"
```

### <a name="header_channel"></a>1.5. [Required] Property `Event > header > channel`

| Type                      | `string`                                                                  |
| ------------------------- | ------------------------------------------------------------------------- |
| **Additional properties** | [[Any type: allowed]](# "Additional Properties of any type are allowed.") |
|                           |                                                                           |

**Description:** The product which published this event.

**Examples:** 

```json
"EQ"
```

```json
"RH"
```

```json
"RM"
```

### <a name="header_dateTime"></a>1.6. [Required] Property `Event > header > dateTime`

| Type                      | `date-time`                                                               |
| ------------------------- | ------------------------------------------------------------------------- |
| **Additional properties** | [[Any type: allowed]](# "Additional Properties of any type are allowed.") |
|                           |                                                                           |

**Description:** When the event happened (this might not be when it was published).

**Example:** 

```json
"2021-08-09T10:55.31.431Z"
```

### <a name="header_messageId"></a>1.7. [Required] Property `Event > header > messageId`

| Type                      | `uuid`                                                                    |
| ------------------------- | ------------------------------------------------------------------------- |
| **Additional properties** | [[Any type: allowed]](# "Additional Properties of any type are allowed.") |
|                           |                                                                           |

**Description:** A unique identifier for this message.

**Example:** 

```json
"ccb71268-1f17-4811-b8f9-d6981a060ce7"
```

### <a name="header_correlationId"></a>1.8. [Required] Property `Event > header > correlationId`

| Type                      | `uuid`                                                                    |
| ------------------------- | ------------------------------------------------------------------------- |
| **Additional properties** | [[Any type: allowed]](# "Additional Properties of any type are allowed.") |
|                           |                                                                           |

**Description:** A unique identifier for everything that relates to this event end-to-end.

**Example:** 

```json
"82426ee7-d34a-49e6-8bc5-5cea7c14e735"
```

### <a name="header_originatingUser"></a>1.9. [Optional] Property `Event > header > originatingUser`

| Type                      | `string`                                                                  |
| ------------------------- | ------------------------------------------------------------------------- |
| **Additional properties** | [[Any type: allowed]](# "Additional Properties of any type are allowed.") |
|                           |                                                                           |

**Description:** The user that initiated this event, for audit trail.

**Example:** 

```json
"fred.bloggs@ons.gov.uk"
```

## <a name="payload"></a>2. [Required] Property `Event > payload`

| Type                      | `object`                                                                  |
| ------------------------- | ------------------------------------------------------------------------- |
| **Additional properties** | [[Any type: allowed]](# "Additional Properties of any type are allowed.") |
| **Defined in**            | #/definitions/payload                                                     |
|                           |                                                                           |

| One of(Option)                                     |
| -------------------------------------------------- |
| [refusal.schema.json](#payload_oneOf_i0)           |
| [surveyLaunch.schema.json](#payload_oneOf_i1)      |
| [uacAuthentication.schema.json](#payload_oneOf_i2) |
|                                                    |

### <a name="payload_oneOf_i0"></a>2.1. Property `Event > payload > oneOf > refusal.schema.json`

| Type                      | `object`                                                                  |
| ------------------------- | ------------------------------------------------------------------------- |
| **Additional properties** | [[Any type: allowed]](# "Additional Properties of any type are allowed.") |
| **Defined in**            | refusal.schema.json                                                       |
|                           |                                                                           |

| Property                                | Pattern | Type   | Deprecated | Definition | Title/Description |
| --------------------------------------- | ------- | ------ | ---------- | ---------- | ----------------- |
| + [refusal](#payload_oneOf_i0_refusal ) | No      | object | No         | -          | -                 |
|                                         |         |        |            |            |                   |

#### <a name="payload_oneOf_i0_refusal"></a>2.1.1. Property `Event > payload > oneOf > Refusal > refusal`

| Type                      | `object`                                                |
| ------------------------- | ------------------------------------------------------- |
| **Additional properties** | [[Not allowed]](# "Additional Properties not allowed.") |
|                           |                                                         |

| Property                                      | Pattern | Type                      | Deprecated | Definition | Title/Description                         |
| --------------------------------------------- | ------- | ------------------------- | ---------- | ---------- | ----------------------------------------- |
| + [caseId](#payload_oneOf_i0_refusal_caseId ) | No      | uuid                      | No         | -          | The ID of the case that is being refused. |
| + [type](#payload_oneOf_i0_refusal_type )     | No      | array of enum (of string) | No         | -          | The type of the refusal.                  |
|                                               |         |                           |            |            |                                           |

##### <a name="payload_oneOf_i0_refusal_caseId"></a>2.1.1.1. Property `Event > payload > oneOf > Refusal > refusal > caseId`

| Type                      | `uuid`                                                                    |
| ------------------------- | ------------------------------------------------------------------------- |
| **Additional properties** | [[Any type: allowed]](# "Additional Properties of any type are allowed.") |
|                           |                                                                           |

**Description:** The ID of the case that is being refused.

**Example:** 

```json
"acb61268-1f17-4811-b8f9-d6981a060ce5"
```

##### <a name="payload_oneOf_i0_refusal_type"></a>2.1.1.2. Property `Event > payload > oneOf > Refusal > refusal > type`

| Type                      | `array of enum (of string)`                                               |
| ------------------------- | ------------------------------------------------------------------------- |
| **Additional properties** | [[Any type: allowed]](# "Additional Properties of any type are allowed.") |
|                           |                                                                           |

**Description:** The type of the refusal.

|                      | Array restrictions |
| -------------------- | ------------------ |
| **Min items**        | N/A                |
| **Max items**        | N/A                |
| **Items unicity**    | False              |
| **Additional items** | False              |
| **Tuple validation** | See below          |
|                      |                    |

| Each item of this array must be               | Description |
| --------------------------------------------- | ----------- |
| [items](#payload_oneOf_i0_refusal_type_items) | -           |
|                                               |             |

##### <a name="autogenerated_heading_3"></a>2.1.1.2.1. Event > payload > oneOf > Refusal > refusal > type > items

| Type                      | `enum (of string)`                                                        |
| ------------------------- | ------------------------------------------------------------------------- |
| **Additional properties** | [[Any type: allowed]](# "Additional Properties of any type are allowed.") |
|                           |                                                                           |

Must be one of:
* "HARD_REFUSAL"
* "EXTRAORDINARY_REFUSAL"
* "SOFT_REFUSAL"

### <a name="payload_oneOf_i1"></a>2.2. Property `Event > payload > oneOf > surveyLaunch.schema.json`

| Type                      | `object`                                                                  |
| ------------------------- | ------------------------------------------------------------------------- |
| **Additional properties** | [[Any type: allowed]](# "Additional Properties of any type are allowed.") |
| **Defined in**            | surveyLaunch.schema.json                                                  |
|                           |                                                                           |

| Property                                          | Pattern | Type   | Deprecated | Definition | Title/Description |
| ------------------------------------------------- | ------- | ------ | ---------- | ---------- | ----------------- |
| + [surveyLaunch](#payload_oneOf_i1_surveyLaunch ) | No      | object | No         | -          | -                 |
|                                                   |         |        |            |            |                   |

#### <a name="payload_oneOf_i1_surveyLaunch"></a>2.2.1. Property `Event > payload > oneOf > Survey Launch > surveyLaunch`

| Type                      | `object`                                                |
| ------------------------- | ------------------------------------------------------- |
| **Additional properties** | [[Not allowed]](# "Additional Properties not allowed.") |
|                           |                                                         |

| Property                                     | Pattern | Type   | Deprecated | Definition | Title/Description                                                            |
| -------------------------------------------- | ------- | ------ | ---------- | ---------- | ---------------------------------------------------------------------------- |
| + [qid](#payload_oneOf_i1_surveyLaunch_qid ) | No      | string | No         | -          | The QID associated with the electronic questionnaire that has been launched. |
|                                              |         |        |            |            |                                                                              |

##### <a name="payload_oneOf_i1_surveyLaunch_qid"></a>2.2.1.1. Property `Event > payload > oneOf > Survey Launch > surveyLaunch > qid`

| Type                      | `string`                                                                  |
| ------------------------- | ------------------------------------------------------------------------- |
| **Additional properties** | [[Any type: allowed]](# "Additional Properties of any type are allowed.") |
|                           |                                                                           |

**Description:** The QID associated with the electronic questionnaire that has been launched.

**Example:** 

```json
"0130000000100142"
```

### <a name="payload_oneOf_i2"></a>2.3. Property `Event > payload > oneOf > uacAuthentication.schema.json`

| Type                      | `object`                                                                  |
| ------------------------- | ------------------------------------------------------------------------- |
| **Additional properties** | [[Any type: allowed]](# "Additional Properties of any type are allowed.") |
| **Defined in**            | uacAuthentication.schema.json                                             |
|                           |                                                                           |

| Property                                                    | Pattern | Type   | Deprecated | Definition | Title/Description |
| ----------------------------------------------------------- | ------- | ------ | ---------- | ---------- | ----------------- |
| + [uacAuthentication](#payload_oneOf_i2_uacAuthentication ) | No      | object | No         | -          | -                 |
|                                                             |         |        |            |            |                   |

#### <a name="payload_oneOf_i2_uacAuthentication"></a>2.3.1. Property `Event > payload > oneOf > UAC Authentication > uacAuthentication`

| Type                      | `object`                                                |
| ------------------------- | ------------------------------------------------------- |
| **Additional properties** | [[Not allowed]](# "Additional Properties not allowed.") |
|                           |                                                         |

| Property                                          | Pattern | Type   | Deprecated | Definition | Title/Description                                               |
| ------------------------------------------------- | ------- | ------ | ---------- | ---------- | --------------------------------------------------------------- |
| + [qid](#payload_oneOf_i2_uacAuthentication_qid ) | No      | string | No         | -          | The QID associated with the UAC which was used to authenticate. |
|                                                   |         |        |            |            |                                                                 |

##### <a name="payload_oneOf_i2_uacAuthentication_qid"></a>2.3.1.1. Property `Event > payload > oneOf > UAC Authentication > uacAuthentication > qid`

| Type                      | `string`                                                                  |
| ------------------------- | ------------------------------------------------------------------------- |
| **Additional properties** | [[Any type: allowed]](# "Additional Properties of any type are allowed.") |
|                           |                                                                           |

**Description:** The QID associated with the UAC which was used to authenticate.

**Example:** 

```json
"0130000000100142"
```

----------------------------------------------------------------------------------------------------------------------------
Generated using [json-schema-for-humans](https://github.com/coveooss/json-schema-for-humans) on 2021-08-10 at 08:41:12 +0100